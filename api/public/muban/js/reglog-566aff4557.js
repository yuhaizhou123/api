!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(13)},,function(e,t,n){function o(e){var t,n=[],o=encodeURIComponent;for(t in e)n.push(o(String(t))+"="+o(String(e[t])));return n.join("&")}function a(e){var t=e||location.search.substr(1),n={};return t.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=decodeURIComponent(t[1])}),n}function i(e,t){var t=t||window.location.href.split("#")[0],n="object"==typeof e?o(e):e;return t+=(t.split("?")[1]?"&":"?")+n}function r(){for(var e,t,n,o=!1,a=["webkit","Moz","O",""],i=a.length,r=document.documentElement.style;i--;)if(a[i]){if(void 0!==r[a[i]+"AnimationName"]){switch(e=a[i],i){case 0:t=e.toLowerCase()+"AnimationStart",n=e.toLowerCase()+"AnimationEnd",o=!0;break;case 1:t="animationstart",n="animationend",o=!0;break;case 2:t=e.toLowerCase()+"animationstart",n=e.toLowerCase()+"animationend",o=!0}break}}else if(void 0!==r.animationName){e=a[i],t="animationstart",n="animationend",o=!0;break}return{supported:o,prefix:e,start:t,end:n}}function c(e,t,n,o){m.removeClass("msg-on");var a=$("#msg-cnt");a.length||($('<div id="msg-cnt" class="msg-cnt"></div>').appendTo(m),a=$("#msg-cnt")),t?a.attr("class","msg-cnt msg-type-"+t):a.attr("class","msg-cnt"),a.html("<span>"+e+"</span>").off("animationend"),m.addClass("msg-on");var n=n,i=o?1e3*o:1e3;window.setTimeout(function(){m.removeClass("msg-on"),n&&n()},i)}function s(e){window.location=g+"?dest="+encodeURIComponent(e||location.href)}function d(){return window.channelID&&/^\d+$/.test(channelID)?channelID:(window.channelID=h.cookie.get("mzl_channel")||"",channelID)}function u(){if(!window._hmt){var e=p["default"],t="";t=window.channelID?channelID:h.cookie.get("mzl_channel"),t&&p[t]&&(e=p[t]);var n=n||[];!function(){var t=document.createElement("script");t.src="//hm.baidu.com/hm.js?"+e;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}(),window._hmt=n}}function l(){var e=$("#app-link,.app-link");if(e.length){var t=h.getChn(),n=t.match("1600"),o=window.location.href.match("/index/app/channel/"),a="http://a.app.qq.com/o/simple.jsp?pkgname=com.zhulang.reader",i="https://app2.zhulang.com/app/download/",r="https://itunes.apple.com/us/app/id1128277830?l=zh&ls=1&mt=8";if(h.isMobile.Android()&&(e.data("android")&&e.attr("href",e.data("android")),e.data("apk")&&e.attr("href",e.data("apk")),n)){var s=e.attr("href");s.match("https")||(i+=s.split("/app/")[1],e.attr("href",i)),$(".app-bar").click(function(){var e=$(this).find(".app-link").attr("href");window.location=e})}h.isMobile.iOS()&&(e.data("ios")&&e.attr("href",e.data("ios")),n&&e.attr("href",r)),(h.isMobile.Weixin()||h.isMobile.QQ())&&!o&&(e.attr("href",a),$(".n-app").attr("href",a)),h.isMobile.Weibo()&&e.on("click",function(e){c("请在浏览器中打开下载",null,null,3)})}}function f(){var e=$(".verifyimg");e.length&&e.click()}var h={showMsg:c,goLogin:s,supportAnimate:r,supportTouch:"ontouchstart"in document.documentElement,io:{},regs:{},ui:{},chn:""},m=$("body"),g="//m.zhulang.com/login/index.html";h.getChn=function(){return h.chn?h.chn:(h.chn=h.cookie.get("mzl_channel")||"default",h.chn)},h.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},Weixin:function(){return navigator.userAgent.match(/MicroMessenger/i)},QQ:function(){return navigator.userAgent.match(/QQ/)},Weibo:function(){return navigator.userAgent.match(/weibo/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}},h.regs={mobi:/^(?:13|14|15|16|17|18|19)[\d]{9}$/,username:/^[a-zA-Z0-9][\w-]{2,30}$/,bankcard:/^[0-9](?:[\d]{21}|[\d]{20}|[\d]{19}|[\d]{18}|[\d]{17}|[\d]{16}|[\d]{15}|[\d]{14}|[\d]{13}|[\d]{12}|[\d]{11}|)$/,email:/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/},h.ui.cur=function(e,t,n){var e=$(e)||e,o=t||"cur";e.addClass(o).siblings().removeClass(o)},h.ui.ena=function(e){var t="disabled";e&&e.each(function(e){$(this).removeClass(t).removeAttr(t)})},h.ui.dis=function(e){var t="disabled";e&&e.each(function(e){$(this).attr(t,t).addClass(t)})},h.ui.loadimg=function(e,t){var e=$(e),n="imgLoadFlag";if(!e.data(n)){var o=e.find("img[data-src],img[data-bg]");o.length&&(o.each(function(){var e=$(this),t=e.data("src"),n=e.data("bg");t&&e.attr("src",t).removeAttr("data-src"),n&&e.css({"background-image":"url("+n+")"}).removeAttr("data-bg")}),e.data(n,1))}},h.ui.tab=function(e,t,n,o,a){var a=a||"click",i=$(e).find(t),r=$(n).find(o);i.on(a,function(e){var t=$(this),n=t.index(),a=r.eq(n),i=h.ui.cur;i(this,"cur"),a.show().siblings(o).hide(),t.blur(),h.ui.loadimg(a),e.preventDefault()})},h.io.serialize=o,h.io.parseUrl=a,h.io.addUrlParam=i,h.io.xssEscape=function(e){return e=String(null===e?"":e),e.replace(/&(?!\w+;)|["'<>\\]/g,function(e){switch(e){case"&":return"&amp;";case"\\":return"\\\\";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return e}})},h.io.parseJson=function(e){try{if("object"==typeof e)return e;if("string"==typeof e)return JSON.parse(e)}catch(t){console.log("parseJson error \n org-data: \n "+e)}};r();!function(e){function t(){var e={};if(document.cookie){var t=document.cookie.split("; ");t.forEach(function(t,n,o){var a=t.split("="),i=a[0],r=a[1];e[i]=r})}return e}function n(e,t,n){if(e&&t){var o=encodeURIComponent(e)+"="+encodeURIComponent(t);return n&&(n.maxAge&&(o+="; max-age="+n.maxAge),n.path&&(o+="; path="+n.path),n.domain&&(o+="; domain="+n.domain),n.secure&&(o+="; secure")),document.cookie=o,o}return""}function o(e){return decodeURIComponent(t()[e])||null}function a(e){t()[e]&&(document.cookie=e+"=; max-age=0")}function i(){var e=t();for(var n in e)document.cookie=n+"=; max-age=0"}function r(e){return t()}function c(e){return e&&"string"==typeof e?e&&window.cookie?(window[e]=window.cookie,delete window.cookie,window[e]):void 0:window.cookie}e.cookie={getCookies:r,set:n,get:o,remove:a,clear:i,noConflict:c}}(h);var p={"default":"e5883283abd0285c634898e065e21499",200001:"93083ac76898fe363cd44a3b9c599716",200002:"59e10cf75029fe5d23a3c5b4068f18f9",160020:"59ebf7a83435c374ab6f94e9c1f58f5a",160021:"660c43db3a131fffa13832636259b95e",160023:"3fd1ba328e6b479dda5668344189cfe9",160024:"0d758ee64750c01ad7728fd460c30f0d",170120:"40b7afcd3a044cefe0cc8eb54b95f6a2"};$(function(){d(),$(".backicon").on("click",function(){window.history.go(-1)}),$(".verifyimg").on("click",function(){var e=$(this),t=e.attr("src").split("?");e.attr("src",t[0]+"?__t="+ +new Date)});var e=window.weixinShareImg||"https://s.zhulang.com/images/zl320v1.png";(h.isMobile.Weixin()||h.isMobile.QQ())&&(m.addClass("inwx"),m.prepend('<div id="zl-wx-share-img" style=" overflow:hidden; width:0px; height:0; margin:0 auto; position:absolute; top:-800px;"><img src="'+e+'"></div>')),$(".js-login,.js-log").on("click",function(){s()}),l(),u()}),h.io.refreshChar=f,e.exports=h},,,,,function(e,t,n){!function(n,o){"undefined"!=typeof e&&e.exports&&(t=e.exports=o(n,t))}(this,function(e,t){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),t.prefix="",t._getPrefixedKey=function(e,t){return t=t||{},t.noPrefix?e:this.prefix+e},t.set=function(e,t,n){var o=this._getPrefixedKey(e,n);try{localStorage.setItem(o,JSON.stringify({data:t}))}catch(a){console&&console.warn("Lockr didn't successfully save the '{"+e+": "+t+"}' pair, because the localStorage is full.")}},t.get=function(e,t,n){var o,a=this._getPrefixedKey(e,n);try{o=JSON.parse(localStorage.getItem(a))}catch(i){o=localStorage[a]?{data:localStorage.getItem(a)}:null}return null===o?t:"object"==typeof o&&"undefined"!=typeof o.data?o.data:t},t.sadd=function(e,n,o){var a,i=this._getPrefixedKey(e,o),r=t.smembers(e);if(r.indexOf(n)>-1)return null;try{r.push(n),a=JSON.stringify({data:r}),localStorage.setItem(i,a)}catch(c){console.log(c),console&&console.warn("Lockr didn't successfully add the "+n+" to "+e+" set, because the localStorage is full.")}},t.smembers=function(e,t){var n,o=this._getPrefixedKey(e,t);try{n=JSON.parse(localStorage.getItem(o))}catch(a){n=null}return null===n?[]:n.data||[]},t.sismember=function(e,n,o){this._getPrefixedKey(e,o);return t.smembers(e).indexOf(n)>-1},t.getAll=function(){var e=Object.keys(localStorage);return e=e.filter(function(e){return-1!==e.indexOf(t.prefix)}),e.map(function(e){return t.get(e.substr(t.prefix.length))})},t.srem=function(e,n,o){var a,i,r=this._getPrefixedKey(e,o),c=t.smembers(e,n);i=c.indexOf(n),i>-1&&c.splice(i,1),a=JSON.stringify({data:c});try{localStorage.setItem(r,a)}catch(s){console&&console.warn("Lockr couldn't remove the "+n+" from the set "+e)}},t.rm=function(e){localStorage.removeItem(e)},t.flush=function(){localStorage.clear()},t})},,,,,,function(e,t,n){function o(e){return e.attr(p,p).addClass(p)}function a(e){return e.removeClass(p).removeClass(v).removeAttr(p)}function i(e){o(e).addClass(v)}function r(){var e=$(".verifyimg");e.length&&e.click()}function c(){var e=$("#log-fm");if(e.length){var t=e.find("[name=username]"),n=e.find("[name=pwd]"),o=e.find("[name=charcode]"),c=d.io.xssEscape(window.name);if(/regSuccess/.test(c)){var s=c.split("|")[1];g.test(s)&&(t.val(s),n.focus())}$("#log-btn").on("click",function(c){var s=$(this);if(!s.attr("disabled")){if(!$.trim(t.val()))return d.showMsg("请填写用户名");if(!$.trim(n.val()))return d.showMsg("请填写密码");if(o.length&&!$.trim(o.val()))return d.showMsg("请填写验证码");var u=e.attr("action"),l=e.serialize();i(s),$.ajax({type:"POST",url:u,data:l,success:function(e){if(!e)return void d.showMsg("貌似网络有点拥堵，请稍后再试~","",function(){a(s)});if(e.code=1*e.code,e.code<=0)d.showMsg(e.msg||e.code,"",function(){a(s)}),-7==e.code&&window.location.reload(),r();else{var t=w||e.url||document.referrer||"/";window.name="",setTimeout(function(){window.location=t},100)}},error:function(e){d.showMsg(m),a(s)}})}})}}function s(){var e=$("#reg-fm");e.length&&$("#reg-btn").on("click",function(t){var n=$(this);if(!n.attr("disabled")){var o=e.find("[name=phone]"),r=e.find("[name=password]"),c=e.find("[name=verify]");if(!g.test(o.val()))return d.showMsg("请填写正确的手机号");if(!$.trim(r.val()))return d.showMsg("请填写密码");if(c.length&&!$.trim(c.val()))return d.showMsg("请填写验证码");var s=e.attr("action"),u=e.serialize();i(n),$.ajax({type:"POST",url:s,data:u,success:function(e){if(!e)return void d.showMsg("貌似网络有点拥堵，请稍后再试~","",function(){a(n)});if(e.code=1*e.code,e.code<=0)d.showMsg(e.msg||e.code,"",function(){a(n)});else{var t=$("#go-log").attr("href")||"/login/";$("html").addClass("reg-succ"),window.name="regSuccess|"+o.val();var i=$("#ctd-s"),r=1*i.text()||3,c=null;c=setInterval(function(){r--,r=Math.max(0,r),i.text(r),0>=r&&(clearInterval(c),window.location=t)},1e3)}},error:function(e){d.showMsg(m),a(n)}})}})}var d=n(2),u=n(14),l=n(7),f=window.zlDomains||["zhulang.com","xxs8.com","kongzhong.com"],h="log_dest",m="网络不给力，稍后重试~",g=d.regs.mobi,p="disabled",v="loading",w=d.io.parseUrl().dest,b=!1;if(w){var x=document.createElement("a");x.href=w;var k=x.hostname,y=new RegExp(f.join("|"));if(y.test(k)&&(b=!0),b){var M=$("[name=dest]");M.length&&M.val(w);var C=$(".login-link"),A=$(".reg-link"),S=d.io.addUrlParam,I={dest:w};if(C.length){var O=C.attr("href"),z=S(I,O);C.attr("href",z)}if(A.length){var O=A.attr("href"),z=S(I,O);A.attr("href",z)}l.set(h,w)}else w="";x=null}$(function(){u.init(),c(),s()})},function(e,t,n){function o(e){return e.attr(s,s).addClass(s)}function a(e){return e.removeClass(s).removeAttr(s)}function i(e){var t=e.data("freq")||60,n=null,i="秒后重新获取";e.data("orgtxt",e.text()).text("验证码已发送"),o(e).blur(),setTimeout(function(){n=setInterval(function(){t--,e.text(t+i),-1>=t&&(a(e).text(e.data("orgtxt")),clearInterval(n),n=null)},1e3)},500)}var r=n(2),c=".sms-btn",s="disabled",d={},u=!1;d.init=function(){$(c).each(function(){var e=$(this),t=$(e.data("phone")),n=$(e.data("char")),i=($(e.data("ipt")),e.data("phonecode")),r=/^(?:13|14|15|16|17|18|19)[\d]{9}$/,c=/[0-9a-zA-Z]{5}/,s=!1,d=!n.length||!1;s=i&&r.test(i)?!0:!1,t.length&&t.on("input blur keyup",function(){var t=$(this).val();r.test(t)?(s=!0,e.data("phonecode",t),d&&a(e)):(s=!1,e.data("phonecode",0),o(e))}),n.length&&n.on("input blur keyup",function(){var t=$(this).val();c.test(t)?(d=!0,e.data("charcode",t),s&&a(e)):(d=!1,e.data("charcode",0),o(e))})}).on("click",function(){var e=$(this),t=e.data("api"),n=e.data("phonecode"),c=e.data("charcode"),s=e.closest("form").find('input[name="money"]').length,d={phone:n};return c&&(d.charcode=c),s&&(d.money=$('input[name="money"]:checked').val()),n?(e.siblings("input").focus(),window.isTest?void i(e):(o(e),void $.ajax({type:"POST",url:t,data:d,success:function(t){return t?(t.code=1*t.code,void(t.code<=0?(-400==t.code?r.goLogin():r.showMsg(t.msg||t.code,"",function(){a(e)}),refreshChar()):i(e))):void r.showMsg("貌似网络有点拥堵，请稍后再试~","",function(){a(e)})},error:function(t){r.showMsg("操作失败，请稍后重试"),a(e),refreshChar()}}))):!1}),u=!0},e.exports=d}]);