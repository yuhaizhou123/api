!function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(3)},,function(t,n,e){function i(t){var n,e=[],i=encodeURIComponent;for(n in t)e.push(i(String(n))+"="+i(String(t[n])));return e.join("&")}function o(t){var n=t||location.search.substr(1),e={};return n.split("&").forEach(function(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}),e}function a(t,n){var n=n||window.location.href.split("#")[0],e="object"==typeof t?i(t):t;return n+=(n.split("?")[1]?"&":"?")+e}function r(){for(var t,n,e,i=!1,o=["webkit","Moz","O",""],a=o.length,r=document.documentElement.style;a--;)if(o[a]){if(void 0!==r[o[a]+"AnimationName"]){switch(t=o[a],a){case 0:n=t.toLowerCase()+"AnimationStart",e=t.toLowerCase()+"AnimationEnd",i=!0;break;case 1:n="animationstart",e="animationend",i=!0;break;case 2:n=t.toLowerCase()+"animationstart",e=t.toLowerCase()+"animationend",i=!0}break}}else if(void 0!==r.animationName){t=o[a],n="animationstart",e="animationend",i=!0;break}return{supported:i,prefix:t,start:n,end:e}}function c(t,n,e,i){g.removeClass("msg-on");var o=$("#msg-cnt");o.length||($('<div id="msg-cnt" class="msg-cnt"></div>').appendTo(g),o=$("#msg-cnt")),n?o.attr("class","msg-cnt msg-type-"+n):o.attr("class","msg-cnt"),o.html("<span>"+t+"</span>").off("animationend"),g.addClass("msg-on");var e=e,a=i?1e3*i:1e3;window.setTimeout(function(){g.removeClass("msg-on"),e&&e()},a)}function s(t){window.location=p+"?dest="+encodeURIComponent(t||location.href)}function d(){return window.channelID&&/^\d+$/.test(channelID)?channelID:(window.channelID=m.cookie.get("mzl_channel")||"",channelID)}function l(){if(!window._hmt){var t=h["default"],n="";n=window.channelID?channelID:m.cookie.get("mzl_channel"),n&&h[n]&&(t=h[n]);var e=e||[];!function(){var n=document.createElement("script");n.src="//hm.baidu.com/hm.js?"+t;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}(),window._hmt=e}}function u(){var t=$("#app-link,.app-link");if(t.length){var n=m.getChn(),e=n.match("1600"),i=window.location.href.match("/index/app/channel/"),o="http://a.app.qq.com/o/simple.jsp?pkgname=com.zhulang.reader",a="https://app2.zhulang.com/app/download/",r="https://itunes.apple.com/us/app/id1128277830?l=zh&ls=1&mt=8";if(m.isMobile.Android()&&(t.data("android")&&t.attr("href",t.data("android")),t.data("apk")&&t.attr("href",t.data("apk")),e)){var s=t.attr("href");s.match("https")||(a+=s.split("/app/")[1],t.attr("href",a)),$(".app-bar").click(function(){var t=$(this).find(".app-link").attr("href");window.location=t})}m.isMobile.iOS()&&(t.data("ios")&&t.attr("href",t.data("ios")),e&&t.attr("href",r)),(m.isMobile.Weixin()||m.isMobile.QQ())&&!i&&(t.attr("href",o),$(".n-app").attr("href",o)),m.isMobile.Weibo()&&t.on("click",function(t){c("请在浏览器中打开下载",null,null,3)})}}function f(){var t=$(".verifyimg");t.length&&t.click()}var m={showMsg:c,goLogin:s,supportAnimate:r,supportTouch:"ontouchstart"in document.documentElement,io:{},regs:{},ui:{},chn:""},g=$("body"),p="//m.zhulang.com/login/index.html";m.getChn=function(){return m.chn?m.chn:(m.chn=m.cookie.get("mzl_channel")||"default",m.chn)},m.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},Weixin:function(){return navigator.userAgent.match(/MicroMessenger/i)},QQ:function(){return navigator.userAgent.match(/QQ/)},Weibo:function(){return navigator.userAgent.match(/weibo/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}},m.regs={mobi:/^(?:13|14|15|16|17|18|19)[\d]{9}$/,username:/^[a-zA-Z0-9][\w-]{2,30}$/,bankcard:/^[0-9](?:[\d]{21}|[\d]{20}|[\d]{19}|[\d]{18}|[\d]{17}|[\d]{16}|[\d]{15}|[\d]{14}|[\d]{13}|[\d]{12}|[\d]{11}|)$/,email:/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/},m.ui.cur=function(t,n,e){var t=$(t)||t,i=n||"cur";t.addClass(i).siblings().removeClass(i)},m.ui.ena=function(t){var n="disabled";t&&t.each(function(t){$(this).removeClass(n).removeAttr(n)})},m.ui.dis=function(t){var n="disabled";t&&t.each(function(t){$(this).attr(n,n).addClass(n)})},m.ui.loadimg=function(t,n){var t=$(t),e="imgLoadFlag";if(!t.data(e)){var i=t.find("img[data-src],img[data-bg]");i.length&&(i.each(function(){var t=$(this),n=t.data("src"),e=t.data("bg");n&&t.attr("src",n).removeAttr("data-src"),e&&t.css({"background-image":"url("+e+")"}).removeAttr("data-bg")}),t.data(e,1))}},m.ui.tab=function(t,n,e,i,o){var o=o||"click",a=$(t).find(n),r=$(e).find(i);a.on(o,function(t){var n=$(this),e=n.index(),o=r.eq(e),a=m.ui.cur;a(this,"cur"),o.show().siblings(i).hide(),n.blur(),m.ui.loadimg(o),t.preventDefault()})},m.io.serialize=i,m.io.parseUrl=o,m.io.addUrlParam=a,m.io.xssEscape=function(t){return t=String(null===t?"":t),t.replace(/&(?!\w+;)|["'<>\\]/g,function(t){switch(t){case"&":return"&amp;";case"\\":return"\\\\";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return t}})},m.io.parseJson=function(t){try{if("object"==typeof t)return t;if("string"==typeof t)return JSON.parse(t)}catch(n){console.log("parseJson error \n org-data: \n "+t)}};r();!function(t){function n(){var t={};if(document.cookie){var n=document.cookie.split("; ");n.forEach(function(n,e,i){var o=n.split("="),a=o[0],r=o[1];t[a]=r})}return t}function e(t,n,e){if(t&&n){var i=encodeURIComponent(t)+"="+encodeURIComponent(n);return e&&(e.maxAge&&(i+="; max-age="+e.maxAge),e.path&&(i+="; path="+e.path),e.domain&&(i+="; domain="+e.domain),e.secure&&(i+="; secure")),document.cookie=i,i}return""}function i(t){return decodeURIComponent(n()[t])||null}function o(t){n()[t]&&(document.cookie=t+"=; max-age=0")}function a(){var t=n();for(var e in t)document.cookie=e+"=; max-age=0"}function r(t){return n()}function c(t){return t&&"string"==typeof t?t&&window.cookie?(window[t]=window.cookie,delete window.cookie,window[t]):void 0:window.cookie}t.cookie={getCookies:r,set:e,get:i,remove:o,clear:a,noConflict:c}}(m);var h={"default":"e5883283abd0285c634898e065e21499",200001:"93083ac76898fe363cd44a3b9c599716",200002:"59e10cf75029fe5d23a3c5b4068f18f9",160020:"59ebf7a83435c374ab6f94e9c1f58f5a",160021:"660c43db3a131fffa13832636259b95e",160023:"3fd1ba328e6b479dda5668344189cfe9",160024:"0d758ee64750c01ad7728fd460c30f0d",170120:"40b7afcd3a044cefe0cc8eb54b95f6a2"};$(function(){d(),$(".backicon").on("click",function(){window.history.go(-1)}),$(".verifyimg").on("click",function(){var t=$(this),n=t.attr("src").split("?");t.attr("src",n[0]+"?__t="+ +new Date)});var t=window.weixinShareImg||"https://s.zhulang.com/images/zl320v1.png";(m.isMobile.Weixin()||m.isMobile.QQ())&&(g.addClass("inwx"),g.prepend('<div id="zl-wx-share-img" style=" overflow:hidden; width:0px; height:0; margin:0 auto; position:absolute; top:-800px;"><img src="'+t+'"></div>')),$(".js-login,.js-log").on("click",function(){s()}),u(),l()}),m.io.refreshChar=f,t.exports=m},function(t,n,e){function i(t,n){var t=$(t),e=1*t.text()+1;return t.text(e)}function o(t,n,e){if(t.setSelectionRange)t.focus(),t.setSelectionRange(n,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",n),i.select()}}function a(t,n){t.length&&(t=t.get(0)),o(t,n,n)}e(4);var r=e(2),c=r.goLogin,s=document,d=window.userInfo&&userInfo.uid,l=function(){var t,n,e={},o=!1,l="",u=$("#cmt-fm").find("form"),f=$("#bk-cmt"),m=null;return e.init=function(){e.cmtFormCtl(),e.replyCtl(),e.likeCtl()},e.getCmtId=function(t){var n=$(t).closest("dl").data("cmtid");return n||0},e.getCmtUid=function(t){var n=$(t).closest("dl").data("uid");return n||0},e.getCmtAuthor=function(t){var n=$(t).closest("dl"),e=n.find(".cmter").text();return e||""},e.cmtFormCtl=function(){if(u.length){if(t=u.find("textarea"),n=$("#cmt-suber"),!d)return t.attr("disabled","disabled").addClass("disabled"),void n.text("登录后评论").off("click").on("click",function(){r.goLogin()});l=$.trim(t.val()),l&&a(t,l.length);var i=$("#cmt-counter"),o=i.find("em"),c=i.find("i"),s=1*t.attr("maxlength");c.text(s),m=setInterval(function(){var n=$.trim(t.val()).length;o.text(Math.min(s,n)),n>s&&t.val(t.val().substr(0,s))},100),e.postCmtCtl()}},e.postCmtCtl=function(){n.on("click",function(){if(!o){var i=n,a=$.trim(t.val()),c=a.length,s=1*t.attr("minlength");if(l==a||$.trim(t.data("rplmsg"))==a)return r.showMsg("说点什么吧~");if(s>c)return r.showMsg("不能少于"+s+"个字哦~");o=!0,i.data("orgtxt",i.text()).text("发布中...").addClass("sendding"),$.ajax({type:"POST",url:u.attr("action"),data:u.serialize(),dataType:"json",timeout:1e4,success:function(t){e.onCmtReturn(t)},error:function(t){r.showMsg("请检查联网情况")},complete:function(){o=!1,i.text(i.data("orgtxt")).removeClass("sendding")}})}})},e.onCmtReturn=function(n){var n="string"==typeof n?JSON.parse(n):n;if(!n)return r.showMsg("评论失败，请稍后重试");var e=1*n.code;if(e){var o=n.msg||"评论失败~";return-5==e&&t.val(""),r.showMsg(o)}var a=n.html;if(a.length){a=a.replace(/<(link|style|iframe)(.|\n)*\/\1>\s*/gi,""),f.prepend($(a).addClass("new-add")),t.val(""),r.showMsg("评论成功！");var c=$("#cmt-total");c.length&&i(c)}},e.replyCtl=function(){function n(n){var n=$(n),i=e.getCmtId(n),o=e.getCmtUid(n),r=n.data("api");if(u.length){var s=e.getCmtAuthor(n);$("#ocid").val(i),$("#ouid").val(o);var l="回复 "+s+": ";t.data("rplmsg",l).val(l),a(t,l.length),$("body").scrollTop($("#cmt-fm").offset().top)}else d?window.location=r:c(r)}$(s).on("click",".opt-reply",function(){n(this)}),u.length&&$(s).on("click","#bk-cmt dd p",function(){var t=$(this).closest("dl"),e=t.find(".opt-reply");n(e)})},e.likeCtl=function(){$(s).on("click",".opt-like",function(){if(!d)return c();var t=$(this);if(!t.hasClass("liked")&&!t.hasClass("sendding")){var n=t.data("api"),o=e.getCmtId(t);t.addClass("sendding"),$.ajax({type:"POST",url:n,timeout:5e3,data:{comment_id:o},success:function(t){var n=1*t.code;if(n)return void(t.msg&&r.showMsg(t.msg));var e=t.comment_id,o=$("#cmt-"+e);if(o.length){var a=o.find(".opt-like").addClass("liked");i(a.find("span"),1)}r.showMsg("收到一枚赞，好鸡冻~")},error:function(t){r.showMsg("网速不给力，请稍后重试")},complete:function(){t.removeClass("sendding")}})}})},e}();$(function(){PicLazyUtil.init(300),l.init()})},function(t,n,e){var i=function(t){var n,e,i,o,a,r={},c=t(window).height(),s=1,d=!1;return r.inited=!1,r.init=function(c){c&&!r.inited&&(!c.hasOwnProperty("hasMore")||c.hasMore)&&(e=c,n=t(e.list),n.length&&(i=e.mode||"scroll","scroll"==i&&(n.after('<div id="btmloader" class="loadbar dynload"><i></i><span>加载中...</span></div>'),o=t("#btmloader")),"click"==i&&(n.after('<div id="loadHdl" class="loadbar clkload"><p><i></i><span>加载中</span></p><p><span>加载更多</span><em></em></p></div>'),a=t("#loadHdl")),r.bindAct(),r.inited=!0))},r.bindAct=function(){"scroll"==i&&t(window).on("scroll",r.detectLoad),"click"==i&&a.on("click",function(){d||r.getData()})},r.unbindAct=function(){"scroll"==i&&t(window).unbind("scroll",r.detectLoad),"click"==i&&a.off("click")},r.stopDetect=function(){r.unbindAct(),o&&o.hide(),a&&a.hide()},r.getScrollTop=function(){var t,n=document;return n.documentElement&&n.documentElement.scrollTop?t=n.documentElement.scrollTop:n.body&&(t=n.body.scrollTop),t},r.belowthefold=function(n){var i=c+r.getScrollTop();return i<=t(n).offset().top-e.threshold},r.reachBottom=function(n){var e=t(window),n=n||0;return window.pageYOffset+e.height()+n>=document.body.scrollHeight},r.detectLoad=function(){if(!d){var t=r.reachBottom(100);t&&r.getData()}},r.getData=function(){d=!0,a&&a.addClass("loading"),t.ajax({type:"GET",dataType:"json",url:e.url,data:e.data,success:function(t){r.onGetData(t)},error:function(t){r.onError(t)}})},r.onError=function(t){r.stopDetect(),console.log(t)},r.onGetData=function(t){var t="string"==typeof t?JSON.parse(t):t;if(!t)return void r.stopDetect();var n=1*t.code,e=t.html;return n||!e.length?void r.stopDetect():void r.buildList(e)},r.buildList=function(t){var i=t.replace(/<(link|style|iframe)(.|\n)*\/\1>\s*/gi,"");n.append(i),e.data.start+=e.data.count,d=!1,a&&a.removeClass("loading"),s++},r}($);$(function(){window.swipeLoadCfg&&i.init(swipeLoadCfg)}),function(n){t.exports=n}(i)}]);